{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reading Homepage</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
          crossorigin="anonymous"></script>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="{% static 'js/breadcrumb.js' %}"></script>
  <script src="{% static 'js/edit_profile.js' %}"></script>
  <script src="{% static 'js/editor.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/breadcrumb_link.css' %}">
  <link rel="stylesheet" href="{% static 'css/base_forum.css' %}">
  <link rel="stylesheet" href="{% static 'css/userinfo_edit.css' %}">
  <link rel="stylesheet" href="{% static 'css/editor.css' %}">
  <link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
</head>
<body>
<div id="navbar-container">
  <nav class="navbar rounded border-bottom">
    <div class="container">
      <a class="navbar-brand" id="forum-title" href="{% url 'home' %}"><b>ReadingForum</b></a>
      <ul class="navbar-nav me-auto flex-row">
        <li class="nav-item"><a href="{% url 'home' %}" class="nav-link px-2">首页</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2">交流</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2">购书</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2">群组</a></li>
        <li class="nav-item"><a href="#" class="nav-link px-2">关于</a></li>
      </ul>
      {#  TODO 做一个搜索功能  #}
      <form role="search" action="" method="post">
        <input class="form-control" type="search" placeholder="搜索">
      </form>
      {% if request.session.username %}
        <div class="dropdown">
          <button type="button" class="btn dropdown-toggle" style="border: none" data-bs-toggle="dropdown">
            <img id="avatar" style="width: 27px;height: 27px" src="
                
                
                
                
                {% if request.session.avatar_url %}{{ request.session.avatar_url }}{% else %}{% static 'img/default_avatar.svg' %}{% endif %}"
                 alt="用户头像">
            {{ request.session.username }}
          </button>
          <ul class="dropdown-menu dropdown-menu-end" style="width: 60px">
            <li><a class="dropdown-item" href="{% url 'userinfo' %}">个人中心</a></li>
            <li><a class="dropdown-item" href="{% url 'profile' %}">编辑资料</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            {# TODO 消息通知 #}
            <li><a class="dropdown-item d-flex align-items-center justify-content-between" href="#">消息 <span
                class="badge bg-danger">4</span></a></li>
            {# TODO 未定功能 #}
            <li><a class="dropdown-item" href="#">链接</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="{% url 'logout' %}">注销</a></li>
          </ul>
        </div>
      {% else %}
        {# 用户在哪里跳转到注册/登录页面，注册/登录完之后就跳转回原来的页面 #}
        <a href="{% url "login" %}?next={% firstof request.path "/" %}" class="nav-link px-3">登录</a>
        <a href="{% url 'register' %}?next={% firstof request.path "/" %}" class="nav-link px-3">注册</a>
      {% endif %}
    </div>
  </nav>
</div>
<div style="margin-top: 57px">
  {% block content %}
  {% endblock %}
</div>
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="me-auto"></strong>
      <small></small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body"></div>
  </div>
</div>
<div class="container">
  <footer class="py-3 my-4 border-top border-info-subtle">
    <p class="text-center text-muted" style="font-size: 12px">© 反正又没人看，我TM直接张磊我老公</p>
  </footer>
</div>
</body>
</html>